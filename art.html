<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EssayMe - Art & Design Essays</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
.hidden {
  display: none;
}

.transition-all {
  transition: all 0.5s ease-in-out;
}

  </style>
</head>
<body class="bg-gray-50 font-sans">

  <!-- Navbar -->
  <header class="bg-white shadow-md">
    <div class="container mx-auto flex justify-between items-center py-4 px-6">
      <a href="#" class="text-2xl font-bold text-blue-600">Essay<span class="text-gray-800">Me</span></a>
      <nav>
        <button id="place-order-button" type="button" class="bg-indigo-600 text-white px-6 py-3 rounded-lg">
          Place Order
        </button>
        <ul class="flex space-x-6 text-gray-700">
          <li><a href="index.html" class="hover:text-blue-500">Home</a></li>
          <li><a href="subjects.html" class="hover:text-blue-500">Subjects</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section id="place-order-section" class="py-16 bg-gradient-to-b from-indigo-100 via-white to-indigo-50">
    <div class="container mx-auto px-6 flex flex-wrap">
      <!-- Left Section: Dynamic Content -->
      <div id="left-content" class="w-full lg:w-1/3 p-4 transition-all duration-500">
        <!-- Initial Content (Features & Benefits) -->
<div class="space-y-6" id="features-benefits">
  <h3 class="text-lg font-semibold text-gray-800 lg:mb-6">Why Choose Us?</h3>

  <!-- For Large Screens: Display Inline -->
  <div class="hidden lg:block">
    <div class="flex items-start space-x-4">
      <span class="text-indigo-500 text-3xl">‚úîÔ∏è</span>
      <div>
        <h4 class="text-lg font-semibold text-gray-800">Expert Assistance</h4>
        <p class="text-sm text-gray-600">Over 5000+ professionals ready to assist you.</p>
      </div>
    </div>
    <div class="flex items-start space-x-4 mt-4">
      <span class="text-indigo-500 text-3xl">‚è∞</span>
      <div>
        <h4 class="text-lg font-semibold text-gray-800">On-Time Delivery</h4>
        <p class="text-sm text-gray-600">Timely submissions guaranteed without quality compromise.</p>
      </div>
    </div>
    <div class="flex items-start space-x-4 mt-4">
      <span class="text-indigo-500 text-3xl">üí∏</span>
      <div>
        <h4 class="text-lg font-semibold text-gray-800">Affordable Pricing</h4>
        <p class="text-sm text-gray-600">Professional services at student-friendly prices.</p>
      </div>
    </div>
  </div>

  <!-- For Small Screens: Render in Carousel -->
  <div class="lg:hidden">
    <div class="flex overflow-x-auto space-x-4 py-4">
      <!-- Card 1 -->
      <div class="min-w-[200px] max-w-[200px] p-4 bg-white border border-red-300 rounded rounded-full shadow-md flex-shrink-0">
        <div class="text-center">
          <span class="block text-indigo-500 text-4xl mb-2">‚úîÔ∏è</span>
          <h4 class="text-md font-semibold text-gray-800">Expert Assistance</h4>
          <p class="text-sm text-gray-600 mt-2">Over 5000+ professionals ready to assist you.</p>
        </div>
      </div>
      <!-- Card 2 -->
      <div class="min-w-[200px] max-w-[200px] p-4 bg-white border border-red-300 rounded rounded-full shadow-md flex-shrink-0">
        <div class="text-center">
          <span class="block text-indigo-500 text-4xl mb-2">‚è∞</span>
          <h4 class="text-md font-semibold text-gray-800">On-Time Delivery</h4>
          <p class="text-sm text-gray-600 mt-2">Timely submissions guaranteed without quality compromise.</p>
        </div>
      </div>
      <!-- Card 3 -->
      <div class="min-w-[200px] max-w-[200px] p-4 bg-white border border-red-300 rounded rounded-full  shadow-md flex-shrink-0">
        <div class="text-center">
          <span class="block text-indigo-500 text-4xl mb-2">üí∏</span>
          <h4 class="text-md font-semibold text-gray-800">Affordable Pricing</h4>
          <p class="text-sm text-gray-600 mt-2">Professional services at student-friendly prices.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Replacement Content (Steps to Completion) -->
<div class="hidden space-y-6" id="steps-content">
  <!-- Title -->
  <h3 class="text-xl font-bold text-gray-800 lg:mb-6">Steps to Success</h3>

  <!-- Large Screens: Structured List -->
  <div class="hidden lg:block">
    <ol class="list-decimal space-y-3 pl-6 text-gray-600">
      <li>Upload Your Assignment <span class="text-indigo-600">üì§</span></li>
      <li>We‚Äôll Review the Assignment <span class="text-gray-600">üîç</span></li>
      <li>Make a Small Deposit <span class="text-indigo-600">üíµ</span></li>
      <li>Receive Your Work <span class="text-indigo-600">üìÑ</span></li>
      <li>Pay Remaining Balance <span class="text-indigo-600">‚úÖ</span></li>
    </ol>
    <p class="text-sm text-gray-500 mt-4">
      Transparency and quality are at the heart of everything we do.
    </p>
  </div>

  <!-- Small Screens: Carousel of Cards -->
  <div class="lg:hidden">
    <div class="flex overflow-x-auto space-x-4 py-4">
      <!-- Card 1 -->
      <div class="min-w-[150px] max-w-[150px] p-4 bg-white border border-red-300 rounded rounded-full shadow-md flex-shrink-0">
        <div class="text-center">
          <span class="block text-indigo-500 text-4xl mb-2">üì§</span>
          <h4 class="text-sm font-semibold text-gray-800">Upload</h4>
          <p class="text-xs text-gray-600 mt-1">Upload your assignment.</p>
        </div>
      </div>
      <!-- Card 2 -->
      <div class="min-w-[150px] max-w-[150px] p-4 bg-white border border-red-300 rounded rounded-full shadow-md flex-shrink-0">
        <div class="text-center">
          <span class="block text-gray-600 text-4xl mb-2">üîç</span>
          <h4 class="text-sm font-semibold text-gray-800">Review</h4>
          <p class="text-xs text-gray-600 mt-1">We‚Äôll review your task.</p>
        </div>
      </div>
      <!-- Card 3 -->
      <div class="min-w-[150px] max-w-[150px] p-4 bg-white border border-red-300 rounded rounded-full shadow-md flex-shrink-0">
        <div class="text-center">
          <span class="block text-indigo-500 text-4xl mb-2">üíµ</span>
          <h4 class="text-sm font-semibold text-gray-800">Deposit</h4>
          <p class="text-xs text-gray-600 mt-1">Make a small deposit.</p>
        </div>
      </div>
      <!-- Card 4 -->
      <div class="min-w-[150px] max-w-[150px] p-4 bg-white border border-red-300 rounded rounded-full shadow-md flex-shrink-0">
        <div class="text-center">
          <span class="block text-indigo-500 text-4xl mb-2">üìÑ</span>
          <h4 class="text-sm font-semibold text-gray-800">Receive</h4>
          <p class="text-xs text-gray-600 mt-1">Receive your work.</p>
        </div>
      </div>
      <!-- Card 5 -->
      <div class="min-w-[150px] max-w-[150px] p-4 bg-white border border-red-300 rounded rounded-full shadow-md flex-shrink-0">
        <div class="text-center">
          <span class="block text-indigo-500 text-4xl mb-2">‚úÖ</span>
          <h4 class="text-sm font-semibold text-gray-800">Pay</h4>
          <p class="text-xs text-gray-600 mt-1">Complete the balance.</p>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

  
<!-- Right Section: Dynamic Content -->
<div id="right-content" class="w-full lg:w-2/3 p-6 bg-white rounded-lg shadow-xl transition-all duration-500">
  <!-- Place Order Form -->
  <form id="place-order-form" onsubmit="handlePlaceOrder(event)">
    <h2 class="text-4xl font-extrabold text-gray-800 text-center mb-8">Place Your Order</h2>

    <!-- Order Type and Subject -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label for="subject" class="block text-sm font-semibold text-gray-800">Subject*</label>
        <select id="subject" class="mt-2 w-full rounded-lg border border-gray-300 bg-white shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
          <option value="">Select Subject</option>
          <option value="Mathematics">Mathematics</option>
          <option value="Physics">Physics</option>
          <option value="English Literature">English Literature</option>
          <option value="History">History</option>
        </select>
      </div>
      <div>
        <label for="order-type" class="block text-sm font-semibold text-gray-800">Order Type*</label>
        <select id="order-type" class="mt-2 w-full rounded-lg border border-gray-300 bg-white shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
          <option value="">Select</option>
          <option value="writing">Writing</option>
          <option value="rewriting">Rewriting</option>
          <option value="editing">Editing</option>
        </select>
      </div>
    </div>

    <!-- Assignment Description -->
    <div class="mt-6">
      <label for="description" class="block text-sm font-semibold text-gray-800">Assignment Description*</label>
      <textarea id="description" rows="4" class="mt-2 w-full rounded-lg border border-gray-300 bg-white shadow-sm focus:ring-indigo-500 focus:border-indigo-500" placeholder="Describe your assignment in detail..." required></textarea>
    </div>

    <!-- Deadline and Page Count Section -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
      <div>
        <label for="deadline" class="block text-sm font-semibold text-gray-800">Deadline*</label>
        <input id="deadline" type="datetime-local" class="w-full rounded-lg border border-gray-300 bg-white shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required />
        <p class="text-xs text-gray-500 mt-1">Select a future date and time.</p>
      </div>
      <div>
        <label for="pages" class="block text-sm font-semibold text-gray-800">No. of Pages*</label>
        <div class="flex items-center space-x-4">
          <button type="button" id="decrease-pages" class="text-lg font-semibold text-indigo-500">-</button>
          <input id="pages" type="number" value="1" class="w-16 text-center rounded-lg border border-gray-300 bg-white shadow-sm" readonly />
          <button type="button" id="increase-pages" class="text-lg font-semibold text-indigo-500">+</button>
        </div>
        <p class="text-xs text-gray-500 mt-1">1 page = 250 words</p>
      </div>
    </div>

    <!-- File Upload -->
    <div class="mt-6">
      <label class="block text-sm font-semibold text-gray-800">Upload Files (Max 10 files)</label>
      <div class="flex items-center justify-center border-2 border-dashed border-pink-300 rounded-lg p-4 mt-2 relative">
        <input type="file" id="file-upload" class="hidden" multiple accept="image/*,application/pdf,.doc,.docx,.pptx,.xlsx" onchange="displayUploadedFiles()" />
        <label for="file-upload" class="text-gray-600 text-sm cursor-pointer">
          Drag & drop files here or <span class="text-indigo-600">browse</span>
        </label>
      </div>
      <ul id="file-list" class="mt-4 space-y-2 text-sm text-gray-600"></ul>
      <p id="file-warning" class="mt-2 text-sm text-red-500 hidden">You can only upload a maximum of 10 files.</p>
    </div>

    <!-- Email Address -->
    <div class="mt-6">
      <label for="email" class="block text-sm font-semibold text-gray-800">Email*</label>
      <input id="email" type="email" class="mt-2 w-full rounded-lg border border-gray-300 bg-white shadow-sm focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter your email" required />
      <p id="email-status" class="mt-2 text-sm"></p>
    </div>

    <!-- Terms and Conditions -->
    <div class="flex items-start mt-6">
      <input id="terms" type="checkbox" class="h-5 w-5 rounded text-indigo-600 border-gray-300 focus:ring-indigo-500" required />
      <label for="terms" class="ml-2 text-sm text-gray-600">I accept the <a href="#" class="text-indigo-600 underline">terms & conditions</a>.</label>
    </div>

    <!-- Submit Button -->
    <div class="text-center mt-8">
      <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-semibold shadow-lg">
        Submit
      </button>
    </div>
  </form>

  <!-- Validation and Account Section -->
  <div id="validation-section" class="hidden">
    <!-- Back Button -->
    <button type="button" onclick="goBackToOrderForm()" class="text-indigo-600 hover:text-indigo-800 mb-4 flex items-center">
      <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path>
      </svg>
      Back to Order Form
    </button>

    <h2 class="text-4xl font-extrabold text-gray-800 text-center mb-8">Validation</h2>

    <!-- Email Validation -->
    <div id="email-validation" class="mb-4">
      <label for="validation-email" class="block text-sm font-semibold">Email</label>
      <div class="relative flex items-center">
        <input id="validation-email" type="email" class="w-full p-2 border rounded" readonly />
        <span id="email-status-icon" class="absolute right-3 hidden">
          <img id="verified-icon" class="w-6 h-6 hidden" src="verified-icon-url" alt="Verified" />
        </span>
      </div>
      <p id="validation-message" class="text-sm mt-2"></p>
    </div>

    <!-- Login Section -->
    <div id="login-section" class="hidden">
      <h3 class="text-xm font-semibold mb-4" id="welcome-message"></h3>
      <form id="login-form" onsubmit="handleLogin(event)">
        <label for="login-password" class="block text-sm font-semibold">Password</label>
        <input id="login-password" type="password" class="w-full p-2 border rounded" placeholder="Enter your password" required />
        <p id="login-error-message" class="text-red-500 text-sm mt-2 hidden"></p>
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded mt-4">Login</button>
      </form>
    </div>

    <!-- Signup Section -->
    <div id="signup-section" class="hidden">
      <form id="signup-form" onsubmit="handleSignup(event)">
        <label for="signup-name" class="block text-sm font-semibold">Full Name</label>
        <input id="signup-name" type="text" class="w-full p-2 border rounded" placeholder="Enter your full name" required />
        <label for="signup-password" class="block text-sm font-semibold mt-4">Password</label>
        <input id="signup-password" type="password" class="w-full p-2 border rounded" placeholder="Create a password" required />
        <p id="signup-error-message" class="text-red-500 text-sm mt-2 hidden"></p>
        <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded mt-4">Signup</button>
      </form>
    </div>
  </div>

  <script>
    // Validate Email and Toggle Login/Signup UI
    async function validateEmail(email) {
      const emailStatus = document.getElementById('validation-message');
      const verifiedIcon = document.getElementById('verified-icon');
      const emailStatusIcon = document.getElementById('email-status-icon');
      const loginSection = document.getElementById('login-section');
      const signupSection = document.getElementById('signup-section');
      const welcomeMessage = document.getElementById('welcome-message');
    
      try {
        const response = await fetch('http://localhost:3002/api/check-email', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email }),
        });
    
        const data = await response.json();
    
        if (data.exists) {
          emailStatus.textContent = ''; // Clear previous messages
          verifiedIcon.classList.remove('hidden');
          emailStatusIcon.classList.remove('hidden');
          welcomeMessage.textContent = `Hi, ${data.name}! Please log in to your account to proceed.`;
    
          // Show the login section
          loginSection.classList.remove('hidden');
          signupSection.classList.add('hidden');
        } else {
          emailStatus.textContent = 'No account exists with this email. Please sign up.';
          emailStatus.className = 'text-red-500';
          verifiedIcon.classList.add('hidden');
          emailStatusIcon.classList.add('hidden');
    
          // Show the signup section
          signupSection.classList.remove('hidden');
          loginSection.classList.add('hidden');
        }
      } catch (error) {
        console.error('Email validation error:', error.message);
        emailStatus.textContent = 'An error occurred during email validation.';
        emailStatus.className = 'text-red-500';
      }
    }
    
    // Login Handler
    async function handleLogin(event) {
      event.preventDefault();
      const email = document.getElementById('validation-email').value.trim();
      const password = document.getElementById('login-password').value.trim();
      const loginErrorMessage = document.getElementById('login-error-message');
    
      try {
        const response = await fetch('http://localhost:3002/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password }),
        });
    
        if (!response.ok) throw new Error('Invalid email or password.');
    
        const data = await response.json();
        localStorage.setItem('userId', data.userId); // Save user ID
        redirectToDashboard(); // Redirect to dashboard
      } catch (error) {
        loginErrorMessage.textContent = error.message;
        loginErrorMessage.classList.remove('hidden');
      }
    }
    
    // Signup Handler
    async function handleSignup(event) {
      event.preventDefault();
      const email = document.getElementById('validation-email').value.trim();
      const password = document.getElementById('signup-password').value.trim();
      const signupErrorMessage = document.getElementById('signup-error-message');
    
      try {
        const response = await fetch('http://localhost:3002/signup', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password }),
        });
    
        if (!response.ok) throw new Error('Signup failed. Email might already be in use.');
    
        const data = await response.json();
        localStorage.setItem('userId', data.userId); // Save user ID
        redirectToDashboard(); // Redirect to dashboard
      } catch (error) {
        signupErrorMessage.textContent = error.message;
        signupErrorMessage.classList.remove('hidden');
      }
    }
    
    // Back to Order Form
    function goBackToOrderForm() {
      document.getElementById('validation-section').classList.add('hidden');
      document.getElementById('place-order-form').classList.remove('hidden');
    }
    
    // Redirect to Dashboard
    function redirectToDashboard() {
      window.location.href = 'student-dashboard.html';
    }
    
    // Page count increment and decrement functionality
    const pageInput = document.getElementById('pages');
    const decreaseButton = document.getElementById('decrease-pages');
    const increaseButton = document.getElementById('increase-pages');
    
    decreaseButton.addEventListener('click', () => {
      let currentValue = parseInt(pageInput.value);
      if (currentValue > 1) {
        pageInput.value = currentValue - 1;
      }
    });
    
    increaseButton.addEventListener('click', () => {
      let currentValue = parseInt(pageInput.value);
      pageInput.value = currentValue + 1;
    });
    
    // Prevent past dates and times in the deadline input
    const currentDatetime = new Date();
    const year = currentDatetime.getFullYear();
    const month = String(currentDatetime.getMonth() + 1).padStart(2, '0');
    const day = String(currentDatetime.getDate()).padStart(2, '0');
    const hours = String(currentDatetime.getHours()).padStart(2, '0');
    const minutes = String(currentDatetime.getMinutes()).padStart(2, '0');
    const currentDatetimeString = `${year}-${month}-${day}T${hours}:${minutes}`;
    document.getElementById('deadline').setAttribute('min', currentDatetimeString);
    
  // Function to display the uploaded files
  function displayUploadedFiles() {
    const fileInput = document.getElementById('file-upload');
    const fileList = document.getElementById('file-list');
    const fileWarning = document.getElementById('file-warning');
    const files = fileInput.files;

    // Show the warning if more than 10 files are uploaded
    if (files.length > 10) {
      fileWarning.classList.remove('hidden');
      return;
    } else {
      fileWarning.classList.add('hidden');
    }

    // Append new files to the list
    for (let i = 0; i < files.length; i++) {
      const file = files[i];

      // Check if the file is already in the list
      const existingFiles = Array.from(fileList.querySelectorAll('li')).map(item => item.textContent.trim());
      if (existingFiles.includes(file.name)) {
        continue; // Skip if file already exists
      }

      const listItem = document.createElement('li');
      listItem.classList.add('flex', 'justify-between', 'items-center');
      
      const fileName = document.createElement('span');
      fileName.textContent = file.name;

      const removeButton = document.createElement('button');
      removeButton.textContent = 'Remove';
      removeButton.classList.add('text-red-500', 'text-xs', 'ml-2', 'hover:underline');
      removeButton.onclick = () => removeFile(file);

      listItem.appendChild(fileName);
      listItem.appendChild(removeButton);
      fileList.appendChild(listItem);
    }
  }

  // Function to remove a file from the input and list
  function removeFile(fileToRemove) {
    const fileInput = document.getElementById('file-upload');
    const fileList = document.getElementById('file-list');
    const files = Array.from(fileInput.files);
    
    // Remove the selected file from the file input
    const updatedFiles = files.filter(file => file.name !== fileToRemove.name);
    const dataTransfer = new DataTransfer();
    updatedFiles.forEach(file => dataTransfer.items.add(file));
    fileInput.files = dataTransfer.files;

    // Remove the file from the list UI
    const listItems = fileList.querySelectorAll('li');
    listItems.forEach(item => {
      if (item.textContent.includes(fileToRemove.name)) {
        item.remove();
      }
    });
  }

  // Optional: Handle drag and drop to add files to the input field
  const dropArea = document.querySelector('.border-dashed');
  dropArea.addEventListener('dragover', function(e) {
    e.preventDefault();
    dropArea.classList.add('border-indigo-400');
  });

  dropArea.addEventListener('dragleave', function(e) {
    e.preventDefault();
    dropArea.classList.remove('border-indigo-400');
  });

  dropArea.addEventListener('drop', function(e) {
    e.preventDefault();
    dropArea.classList.remove('border-indigo-400');

    // Simulate file input change by assigning dropped files to the input element
    const files = e.dataTransfer.files;
    const fileInput = document.getElementById('file-upload');

    // Append the dropped files to the existing files
    const dataTransfer = new DataTransfer();
    for (let file of fileInput.files) {
      dataTransfer.items.add(file);
    }
    for (let file of files) {
      dataTransfer.items.add(file);
    }
    fileInput.files = dataTransfer.files;

    displayUploadedFiles();
  });
  
    // Handle Order Placement
    async function handlePlaceOrder(event) {
  event.preventDefault();

  const email = document.getElementById("email").value.trim();
  const description = document.getElementById("description").value.trim();
  const subject = document.getElementById("subject").value;
  const orderType = document.getElementById("order-type").value;
  const deadline = document.getElementById("deadline").value;
  const pages = parseInt(document.getElementById("pages").value);

  if (!email || !description || !subject || !orderType || !deadline || !pages) {
    alert("Please fill in all required fields.");
    return;
  }

  try {
    // Submit the order
    const response = await fetch("http://localhost:3002/api/submit-order", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, subject, orderType, description, deadline, pages }),
    });

    if (!response.ok) throw new Error("Failed to place order.");

    const data = await response.json();

    // Check if user is logged in
    const userId = localStorage.getItem("userId");
    if (!userId) {
      // Show validation if not logged in
      document.getElementById("place-order-form").classList.add("hidden");
      document.getElementById("validation-section").classList.remove("hidden");
      document.getElementById("validation-email").value = email;
    } else {
      // Redirect to dashboard if logged in
      redirectToDashboard();
    }
  } catch (error) {
    console.error("Order Submission Error:", error.message);
    alert("Error while submitting the order. Please try again.");
  }
}

    </script>
    
</body>
</html>